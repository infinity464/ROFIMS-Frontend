<div class="upload-container">
  <h2>Upload PDF Document</h2>

  <div
    class="drop-zone"
    [class.has-file]="selectedFile"
    (dragover)="onDragOver($event)"
    (drop)="onDrop($event)">

    @if (!selectedFile) {
      <div class="drop-zone-content">
        <span class="icon">ðŸ“„</span>
        <p>Drag & drop a PDF file here or</p>
        <label class="file-input-label">
          <input type="file" accept=".pdf" (change)="onFileSelected($event)" hidden>
          Browse Files
        </label>
      </div>
    } @else {
      <div class="file-info">
        <span class="icon">âœ…</span>
        <p>{{ selectedFile.name }}</p>
        <p class="file-size">{{ (selectedFile.size / 1024 / 1024).toFixed(2) }} MB</p>
        <button class="btn-clear" (click)="clearSelection()">Remove</button>
      </div>
    }
  </div>

  <div class="tags-input">
    <label for="tags">Tags (comma-separated):</label>
    <input
      type="text"
      id="tags"
      [(ngModel)]="tagsInput"
      placeholder="e.g., Leave, Transfer, Official"
      [disabled]="isUploading">
  </div>

  @if (uploadError) {
    <div class="alert alert-error">{{ uploadError }}</div>
  }

  @if (uploadSuccess) {
    <div class="alert alert-success">Document uploaded successfully! It will be indexed shortly.</div>
  }

  <button
    class="btn-upload"
    (click)="upload()"
    [disabled]="!selectedFile || isUploading">
    @if (isUploading) {
      <span class="spinner"></span> Uploading...
    } @else {
      Upload Document
    }
  </button>
</div>
